{% extends 'index.html' %}

{% block  title %}
    <title>Accueil du site</title>
{% endblock  %}
            
{% block content %}

    <!-- <div class="mt-3 row justify-content-around">
        <button type="button" class="col-2 btn btn-outline-primary">Caté 1</button>
        <button type="button" class="col-2 btn btn-outline-primary">Caté 2</button>
        <button type="button" class="col-2 btn btn-outline-primary">Caté 3</button>
        <button type="button" class="col-2 btn btn-outline-primary">Caté 4</button>
        <button type="button" class="col-2 btn btn-outline-primary">Caté 5</button>
    </div>

    <form method='GET' action='/articles/'>
        <input type='text' name='q' placeholder='Search'>
        <input type='submit' value='Rechercher'>
    </form>-->
    {% if request.user.is_authenticated and request.user.is_superuser %}
    <form method='GET' action='/articles/'>
        <div class="mt-3 row justify-content-around">
            <input type="submit" name='q1' class="col-2 btn btn-outline-primary" value='Top ventes'>
            <input type="submit" name='q2' class="col-2 btn btn-outline-primary" value='Nul ventes'>
            <input type="submit" name='q3' class="col-2 btn btn-outline-primary" value='Alerte stock'>
        </div>
    </form>
    {% endif %}
    <header class="image_bur">
        <h1 class="text-center m-5">Liste des articles disponible</h1>
    </header>


    <div class='container'>
    <div class="row justify-content-around custom-line">
    {% for article in articles %}

        <!-- <div>
            <h2>{{ article.name }}</h2>
            <h5>Publié le : {{article.created_on }}</h5>
            <p>{{ article.description|safe|truncatewords:50 }}</p>
        </div>-->
        
        <div class="card mb-3 m-1 col-10 col-lg-5 col-xl-3">
            <a href="{% url 'articles:detail' slug=article.slug %}">
                <h3 class="card-header">{{ article.name }}</h3>
                <svg xmlns="http://www.w3.org/2000/svg" class="d-block user-select-none" width="100%" height="200" aria-label="Placeholder: Image cap" focusable="false" role="img" preserveAspectRatio="xMidYMid slice" viewBox="0 0 318 180" style="font-size:1.125rem;text-anchor:middle">
                    <rect width="100%" height="100%" fill="#868e96"></rect>
                    <text x="50%" y="50%" fill="#dee2e6" dy=".3em">Image cap</text>
                </svg>
                <div class="card-body">
                    <p class="card-text">{{ article.description|safe|truncatewords:25 }}</p>
                    {% if article.stock > 0 %}
                    <strong>En stock</strong><br>
                    {% else %}
                    <strong class="text-danger">Rupture de stock</strong><br>
                    {% endif %}
                    <strong >{{ article.price }}€</strong>
                </div>
                <div class="card-body text-center">
                    <a href="{% url 'commande:create-unique' slug=article.slug %}" class="card-link">Acheter</a><br>
                    <a href="{% url 'commande:create-panier' slug=article.slug %}" class="card-link">Ajouter au panier</a>
                </div>
                {% if request.user.is_authenticated and request.user.is_superuser %}
                <div class="card-body text-center">
                    <a href="{% url 'articles:edit' slug=article.slug %}" class="text-danger card-link">Editer</a>
                    <a href="{% url 'articles:delete' slug=article.slug %}" class="text-danger card-link">Supprimer</a>
                </div>
                {% endif %}
                <div class="card-footer text-muted">
                    Publié le : {{ article.created_on }}
                </div>
            </a>
        </div>
        

    {% endfor %}
    </div>
    </div>

{% endblock %}